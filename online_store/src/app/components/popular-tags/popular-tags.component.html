<div class="popular-tags-container">
  <h2>Popular Tags</h2>
  <div *ngIf="error" class="error">{{ error }}</div>

  <div *ngFor="let cat of categories">
    <h3 (click)="onToggleCategory(cat)" class="category-header">
      {{ cat }}
      <span> ({{ isOpen[cat] ? 'Hide' : 'Show' }}) </span>
    </h3>

    <div *ngIf="isOpen[cat]" class="category-details">
      <div *ngIf="!popularTagsForCategory[cat]">Loading popular tags...</div>

      <div *ngIf="popularTagsForCategory[cat]">
        <ul>
          <li *ngFor="let tag of popularTagsForCategory[cat]">
            {{ tag.tag }} ({{ tag.count }})
          </li>
        </ul>

        <div class="chart-container">
          <canvas
            baseChart
            [data]="chartDataForCategory[cat]"
            [options]="chartOptions"
            [type]="chartType"
          >
          </canvas>
        </div>
      </div>
    </div>
  </div>
</div>
